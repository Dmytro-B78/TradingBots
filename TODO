## 🎯 Цель
Повысить надёжность логирования, расширить тестовое покрытие, автоматизировать контроль и сохранить прозрачную диагностику.

---

## 📌 Этап 1: Завершение ядра стратегии
- ✅ Поддержка `max_holding_period`, `mode`, `side=0`
- ✅ RiskManager: расчёт позиции, учёт стопа, RRR
- ✅ Фильтры: ATR, ADX
- ✅ Мульти-таймфрейм фильтр
- ✅ Train/Test split
- ✅ Walk-forward оптимизация

---

## 🔁 Интеграция стратегий
- ✅ Подключены SMA, RSI, SL/TP
- ✅ Параметры стратегий в `config.json`
- ✅ Тесты стратегий: сигналы, совместимость с RiskGuard

---

## ⚙️ Этап 2: Подготовка к live
- ✅ Разделение слоёв: strategy / exec / data / config
- ✅ `bot_live.py`: цикл, логика, режимы
- ✅ `state/`: позиции, история сделок (`self.trades`, `summary()`)

---

## 🧠 Этап 3: Адаптивность
- ✅ Авто-retrain (rolling window)
- ✅ Классификация рынка (тренд / флэт / волатильность)
- ✅ Профили параметров под режимы

---

## 🧪 Этап 4: Тестирование
- ✅ Paper trading
- ✅ Сравнение сигналов с графиком
- [ ] Проверка исполнения и логики

---

## 📈 Этап 5: Отчёты
- ✅ Визуализации: equity curve, распределение сделок (`plot_walk_pnl.py`)
- ✅ `changes.log` с результатами прогонов (`walk_forward.log`, `walk_forward_results.json`)
- [ ] Сохранение логов с меткой времени (архивация, версионирование)

---

## ⚙️ Этап 6: CI/CD
- [ ] Makefile: установка, отчёты
- [ ] Артефакты в CI/CD
- [ ] Проверка RiskGuard и Executor в симуляции

---

## 🚀 Этап 7: Live‑старт (0.6-pre-live)
- [ ] Ветка `stage0.5_pre_live`
- [ ] Проверка RiskGuard на live
- [ ] Обновление документации

---

## 📦 Рефакторинг селектора
- [ ] Вынести `_safe_ticker`, `_cache_valid` в `pipeline_utils.py`
- [ ] Обновить `pipeline.py`
- [ ] Юнит‑тесты для утилит

---

## 🪵 Логирование
- ✅ Единый префикс логов (`[FILTER:...]`, `[RISK]`, `[EXEC]`)
- ✅ Отчётность по фильтрам (через логирование и `summary()`)
