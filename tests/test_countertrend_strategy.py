# -*- coding: utf-8 -*-# ============================================# ?? File: tests/test_countertrend_strategy.py# ?? Р В Р’В Р РЋРЎС™Р В Р’В Р вЂ™Р’В°Р В Р’В Р вЂ™Р’В·Р В Р’В Р В РІР‚В¦Р В Р’В Р вЂ™Р’В°Р В Р Р‹Р Р†Р вЂљР Р‹Р В Р’В Р вЂ™Р’ВµР В Р’В Р В РІР‚В¦Р В Р’В Р РЋРІР‚ВР В Р’В Р вЂ™Р’Вµ: Р В Р’В Р вЂ™Р’В®Р В Р’В Р В РІР‚В¦Р В Р’В Р РЋРІР‚ВР В Р Р‹Р Р†Р вЂљРЎв„ў-Р В Р Р‹Р Р†Р вЂљРЎв„ўР В Р’В Р вЂ™Р’ВµР В Р Р‹Р В РЎвЂњР В Р Р‹Р Р†Р вЂљРЎв„ўР В Р Р‹Р Р†Р вЂљРІвЂћвЂ“ Р В Р’В Р СћРІР‚ВР В Р’В Р вЂ™Р’В»Р В Р Р‹Р В Р РЏ Р В Р Р‹Р Р†Р вЂљРЎвЂєР В Р Р‹Р РЋРІР‚СљР В Р’В Р В РІР‚В¦Р В Р’В Р РЋРІР‚СњР В Р Р‹Р Р†Р вЂљР’В Р В Р’В Р РЋРІР‚ВР В Р’В Р РЋРІР‚В run() Р В Р’В Р РЋРІР‚ВР В Р’В Р вЂ™Р’В· countertrend.py# ? Р В Р’В Р РЋРЎСџР В Р Р‹Р В РІР‚С™Р В Р’В Р РЋРІР‚СћР В Р’В Р В РІР‚В Р В Р’В Р вЂ™Р’ВµР В Р Р‹Р В РІР‚С™Р В Р Р‹Р В Р РЏР В Р’В Р вЂ™Р’ВµР В Р Р‹Р Р†Р вЂљРЎв„ў Р В Р Р‹Р В РЎвЂњР В Р’В Р РЋРІР‚ВР В Р’В Р РЋРІР‚вЂњР В Р’В Р В РІР‚В¦Р В Р’В Р вЂ™Р’В°Р В Р’В Р вЂ™Р’В»Р В Р Р‹Р Р†Р вЂљРІвЂћвЂ“ Р В Р’В Р В РІР‚В¦Р В Р’В Р вЂ™Р’В° Р В Р’В Р РЋРІР‚СћР В Р Р‹Р В РЎвЂњР В Р’В Р В РІР‚В¦Р В Р’В Р РЋРІР‚СћР В Р’В Р В РІР‚В Р В Р’В Р вЂ™Р’Вµ RSI Р В Р Р‹Р В Р Р‰Р В Р’В Р РЋРІР‚СњР В Р Р‹Р В РЎвЂњР В Р Р‹Р Р†Р вЂљРЎв„ўР В Р Р‹Р В РІР‚С™Р В Р’В Р вЂ™Р’ВµР В Р’В Р РЋР’ВР В Р Р‹Р РЋРІР‚СљР В Р’В Р РЋР’ВР В Р’В Р РЋРІР‚СћР В Р’В Р В РІР‚В # ============================================import pytestimport pandas as pdfrom bot_ai.strategy import countertrend@pytest.fixturedef sample_df():`n    pass    return pd.DataFrame({        "time": pd.date_range(start="2026-01-01", periods=15, freq="1h"),        "close": [100 + i for i in range(15)]    })def test_run_returns_sell_signal(monkeypatch, sample_df):`n    pass    monkeypatch.setattr(countertrend, "fetch_ohlcv", lambda pair, timeframe: sample_df)    monkeypatch.setattr(countertrend, "rsi", lambda close, period: [50]*14 + [85])    signal = countertrend.run("BTCUSDT", "1h")    assert signal == "sell"def test_run_returns_buy_signal(monkeypatch, sample_df):`n    pass    monkeypatch.setattr(countertrend, "fetch_ohlcv", lambda pair, timeframe: sample_df)    monkeypatch.setattr(countertrend, "rsi", lambda close, period: [50]*14 + [15])    signal = countertrend.run("BTCUSDT", "1h")    assert signal == "buy"def test_run_returns_none(monkeypatch, sample_df):`n    pass    monkeypatch.setattr(countertrend, "fetch_ohlcv", lambda pair, timeframe: sample_df)    monkeypatch.setattr(countertrend, "rsi", lambda close, period: [50]*15)    signal = countertrend.run("BTCUSDT", "1h")    assert signal is None




